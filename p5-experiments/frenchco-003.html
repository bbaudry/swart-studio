<!DOCTYPE html>
<html lang="en">
<html>

<head>
    <meta charset="UTF-8">
    <script src="libraries/p5.js"></script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }
    </style>
</head>

<body>
    <script>
        //global vars for the whole piece
        var w// = 900 
        var h// = 900 
        var cnv
        var x, y
        var xoff,yoff
        var step, stepx, stepy

        function setup() {
            w = windowHeight
            h = windowHeight
            cnv = createCanvas(w, h);
            centerCanvas();
            colorMode(HSB, 360, 100, 100, 250);
            noFill();
            background(0, 0, 100)
            stroke(0, 0, 100);
            x = 0
            y = 0
            xoff = random() * 100
            yoff = random() * 100
            step = w / 84
            stepx = w / step
            stepy = h / step
        }

        function centerCanvas() {
            var x = (windowWidth - w) / 2;
            var y = (windowHeight - h) / 2;
            cnv.position(x, y);
        }

        function draw() {
            //            drawregular()
            drawrandom()
        }

        var noisestep = 1.9
        function drawrandom() {
            let x = Math.floor(noise(xoff) * stepx) * step
            xoff += noisestep
            let y = Math.floor(noise(yoff) * stepy) * step
            yoff += noisestep
                //stroke(0, 0, 0); noFill()
                noStroke(); fill(0, 0, 0)
            if (random() < 0.1) { noStroke(); fill(0, 100, 100) }
            rect(x, y, step, step)


        }

        function drawregular() {
            if (x > w) {
                x = 0; y += step
            }
            else {
                x += step
                if (y > h) { noLoop() }
            }
            if (noise(xoff) < 0.42) {
                //stroke(0, 0, 0); noFill()
                noStroke(); fill(0, 0, 0)
                if (random() < 0.1) { noStroke(); fill(0, 100, 100) }
                rect(x, y, step, step)
            }
            xoff++

        }

    </script>
</body>

</html>