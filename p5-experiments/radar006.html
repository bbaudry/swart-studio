<!DOCTYPE html>
<html lang="en">
<html>

<head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tone@14.7.77/build/Tone.min.js"></script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }
    </style>
</head>

<body>
    <script>
        //global vars for the whole piece
        var w = document.documentElement.clientWidth;//width of window that is available for drawing
        var h = document.documentElement.clientHeight;//width of window that is available for drawing
        var spokes = [];
        var free;
        var resolution;

        function preload() {
            free = loadFont('fonts/FreeMono.ttf');
        }

        function setup() {
            colorMode(HSB, 360, 100, 100, 250);
            let canvas = createCanvas(w, h);
            textFont(free);
            textSize(42);
            resolution=42;
            initSpokes();
        }

        function initSpokes(){
            let step=(2*PI)/resolution
            let a, r
            let cx=w/2
            let cy=h/2
            for (i=0;i<resolution;i++){
                r=0.45*h+random()*(0.05*h) 
                a=i*step;
                spokes.push({rad:r,x:cx,y:cy,angle:a})
            }
        }

        function draw() {
            background(0,0,0)
            stroke(0,0,100)
            for (i=1;i<resolution;i++){
                let x1=spokes[i-1].x+spokes[i-1].rad*cos(spokes[i-1].angle)
                let y1=spokes[i-1].y+spokes[i-1].rad*sin(spokes[i-1].angle)
                let x2=spokes[i].x+spokes[i].rad*cos(spokes[i].angle)
                let y2=spokes[i].y+spokes[i].rad*sin(spokes[i].angle)
                line(x1,y1,x2,y2)                
            }
            let x1=spokes[resolution-1].x+spokes[resolution-1].rad*cos(spokes[resolution-1].angle)
                let y1=spokes[resolution-1].y+spokes[resolution-1].rad*sin(spokes[resolution-1].angle)
                let x2=spokes[0].x+spokes[0].rad*cos(spokes[0].angle)
                let y2=spokes[0].y+spokes[0].rad*sin(spokes[0].angle)
                line(x1,y1,x2,y2)                
            moveSpokes()
        }

        function moveSpokes(){     
            for (i=0;i<resolution;i++){
                spokes[i].rad+=0.05*h-random()*0.1*h
            }
        }

        function windowResized() {
            w = document.documentElement.clientWidth;//width of window that is available for drawing
            h = document.documentElement.clientHeight;//width of window that is available for drawing
            resizeCanvas(w, h);
        }

    </script>
</body>

</html>