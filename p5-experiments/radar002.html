<!DOCTYPE html>
<html lang="en">
<html>

<head>
    <meta charset="UTF-8">
    <script src="libraries/p5.js"></script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }
    </style>
</head>

<body>
    <script>
        //global vars for the whole piece
        var w = document.documentElement.clientWidth;//width of window that is available for drawing
        var h = document.documentElement.clientHeight;//width of window that is available for drawing
        let myFont;
        function preload() {
            myFont = loadFont('fonts/InconsolataSemiExpanded-Light.ttf');
        }

        function setup(){
            colorMode(HSB,360,100,100);
            createCanvas(w, h);
        }

        function draw(){
            background(0,0,0)
            grid(start())
            noLoop()
        }

        function start(){
            let x=0
            let horizon=[]
            while(x<w){
                let wi = 84+Math.random()*42
                horizon.push([x,wi])
                x+=wi
            }
            return horizon
        }

        function grid(horizon){
            for (vera in horizon){
                pillar(vera[0],vera[1])
                console.log("1: "+vera[0])
            }
        }

        function pillar(x1,x2){
            let y=0;
            let wi=x2-x1
            let white = true;
            let hi;
            while(y<h){
                hi = 3+Math.random()*7;
                if (Math.random()<0.01){            fill(0,100,100);}
                else{            fill(0,0,100);}
                rect(x1,y,wi,hi)
                console.log("y:"+y)
                y+=hi+3+Math.random()*7;
            }
        }



        function windowResized() {
            w = document.documentElement.clientWidth;//width of window that is available for drawing
            h = document.documentElement.clientHeight;//width of window that is available for drawing
            resizeCanvas(w, h);
        }

    </script>
</body>

</html>