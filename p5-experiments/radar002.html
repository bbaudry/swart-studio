<!DOCTYPE html>
<html lang="en">
<html>

<head>
    <meta charset="UTF-8">
    <script src="libraries/p5.js"></script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }
    </style>
</head>

<body>
    <script>
        //global vars for the whole piece
        var w = document.documentElement.clientWidth;//width of window that is available for drawing
        var h = document.documentElement.clientHeight;//width of window that is available for drawing
        let myFont;
        let horizon = []
        function preload() {
            myFont = loadFont('fonts/InconsolataSemiExpanded-Light.ttf');
        }

        function setup(){
            colorMode(HSB,360,100,100);
            createCanvas(w, h);
            init_horizon()   
        }

        function draw(){
            background(0,0,0);
            grid(horizon);
            //noLoop()
        }

        function init_horizon(){
            let x=0;
            let wi;
            while(x<w){
                wi = 84+Math.random()*84;
                horizon.push([x,x+wi])
                let toto=x+wi
                x+=wi;
            }
        }

        function grid(horizon){
            for (var i =0; i<horizon.length; i++){
                pillar(horizon[i][0],horizon[i][1]);
            }
        }

        let fix_y_pad =7;
        let rand_y_pad=11;
        function pillar(x1,x2){
            let y=0;
            let wi=x2-x1
            let white = true;
            let hi;
            while(y<h){
                hi = fix_y_pad+random()*rand_y_pad;
                if (random()<0.01){fill(0,100,100);}
                else{fill(0,0,100);}
                rect(x1,y,wi,hi)
                y+=hi+fix_y_pad+random()*rand_y_pad;
            }
        }



        function windowResized() {
            w = document.documentElement.clientWidth;//width of window that is available for drawing
            h = document.documentElement.clientHeight;//width of window that is available for drawing
            resizeCanvas(w, h);
        }

    </script>
</body>

</html>