<!DOCTYPE html>
<html lang="en">
<html>

<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.dom.min.js"></script>
    <script src="https://unpkg.com/p5.js-svg@1.5.1"></script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }
    </style>
</head>

<body>
    <script>
        //pixel = dpi * mm / 25.4 mm
        //A3: 297mm Ã— 420mm
        //96dpi is for plotting on the UUNA TEK iDraw
        //w=96*297/25.4=1122.5
        //h=96*420/25.4=1587.4
        var echelle = 0.5
        var w = 1122 * echelle
        var h = 1587 * echelle
        var rightmargin = w - 42
        var leftmargin = 42
        var topmargin = 42
        var bottommargin = h - 42
        var cnv, imgbtn

        function setup() {
            //getsvg()
            getpng()
            centerCanvas();
            colorMode(HSB, 360, 100, 100, 250);
            strokeCap(SQUARE)
            background(0, 0, 100)
            noFill()
            stroke(330, 100, 100)
        }

        function getsvg() {
            cnv = createCanvas(w, h, SVG);
            imgbtn = createButton("save svg");
            placebtn();
            imgbtn.mouseClicked(savesvg);
        }
        function getpng() {
            cnv = createCanvas(w, h);
            imgbtn = createButton("save png");
            placebtn();
            imgbtn.mouseClicked(savepng);
        }

        function centerCanvas() {
            var x = (windowWidth - w) / 2;
            var y = (windowHeight - h) / 2;
            cnv.position(x, y);
        }

        function placebtn() {
            var x = (windowWidth - w) / 2;
            var y = (windowHeight - h) / 2;
            imgbtn.position(x - 200, y + h / 2 + 42)
        }

        function savesvg() {
            save("plottable010.svg");
        }
        function savepng() {
            save("plottable010.png");
        }

        var off = 4
        function draw() {
            stroke(0, 0, 0)
            rect(0, 0, w, h)
            stroke(330, 100, 100)
            var cx=w/2
            var cy=h/3
            var diam = w/2.5
            ellipse(cx,cy,diam,diam)
            diam = w/1.3
            ellipse(cx,cy,diam,diam)

        }

        function test3(){
            var cx, cy, diam
            for (var i = 0; i < 210; i += 2) {
                cx = w / 2
                cy = h / 7 + i
                diam = h / 10 + i * 2
                stroke(230, 100, 100)
                ellipse(cx, cy, diam, diam)
                stroke(330, 100, 100)
                cx = w / 2 + 4
                ellipse(cx, cy, diam, diam)
            }
            cx = w / 2
            cy = h / 7 + 210
            diam = h / 10 + 420
            var rad = diam / 2
            var angle = 42
            var x1 = cx + rad * cos(radians(angle))
            var y1 = cy + rad * sin(radians(angle))
            var x2 = x1 + rad * cos(radians(angle + 90))
            var y2 = y1 + rad * sin(radians(angle + 90))
            var x3 = x1 + rad / 2 * cos(radians(angle - 90))
            var y3 = y1 + rad / 2 * sin(radians(angle - 90))
            line(x3, y3, x2, y2)
            for (var i = 0; i < 84; i += 2) {
                x2 += 4
                y2 += 0.03 * i
                line(x3, y3, x2, y2)

            }
            noLoop()
        }
        function test2() {
            for (var i = 0; i < 42; i++) {
                quad(leftmargin + i * off, topmargin + i * off,
                    500, topmargin + i * off,
                    500 - i * off, 400 - i * off,
                    leftmargin + i * off, 400 - i * off)
                quad(500 + i * off, topmargin + i * off,
                    rightmargin, topmargin + i * off,
                    rightmargin - i * off, 600 - i * off,
                    500 + i * off, 600 - i * off)
                quad(leftmargin, 400 + i * off,
                    400 - i * off, 400 + i * off,
                    400 - i * off, bottommargin - i * off,
                    leftmargin + i * off, bottommargin - i * off)
                quad(400 + i * off, 600 + i * off,
                    rightmargin - i * off, 600 + i * off,
                    rightmargin - i * off, bottommargin - i * off,
                    400, bottommargin - i * off)
            }
        }
        function test1() {
            for (var i = 0; i < 42; i++) [
                quad(leftmargin, topmargin + 200,
                    500 - i * 5, 500 - i * 10,
                    500, topmargin + 200,
                    leftmargin, 500 - i * 10)
            ]
        }
    </script>
</body>

</html>